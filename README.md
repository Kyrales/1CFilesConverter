# Набор скриптов для конвертации файлов 1С между различными форматами (Binary, XML, EDT)

Цель - упростить использование инструментов конвертации до вызова одного скрипта с парой параметров.

Скрипты расположены в каталоге [scripts](./scripts)

## Необходимые инструменты

* [Платформа 1С:Предприятие 8.3](https://releases.1c.ru/project/Platform83)
* [Java runtime environment 11](https://releases.1c.ru/project/Liberica11FullJDK)
* [1C:Enterprise Development Tools (EDT)](https://releases.1c.ru/project/DevelopmentTools10)
* Утилита ring (входит в состав EDT)

## Переменные среды

* **V8_VERSION** - версия используемой платформы 1С:Предприятие (по умолчанию: `8.3.20.2290`)
* **V8_TEMP** - путь к каталогу для создания временных файлов в процессе конвертации (по умолчанию: `%TEMP%\1c`)
* **V8_CONVERT_TOOL** - инструмент для конвертации файлов конфигурации (по умолчанию: `designer`):
  * **designer** - для конвертации используется пакетный режим конфигуратора
  * **ibcmd** - для конвертации используется утилита администрирования автономного сервера
* **V8_RING_TOOL** - путь к утилите ring из состава EDT (по умолчанию берется из переменной окружения `%PATH%`)

## Скрипты конвертации

### [conf2ib.cmd](./scripts/cf2ib.cmd)

Выполняет загрузку конфигурации из указанного источника в файловую информационную базу.

Источником может выступать:

* Файл выгрузки конфигурации (cf)
* Каталог выгрузки конфигурации в файлы (xml)
* Каталог проекта 1C:Enterprise Development Tools (EDT)

Параметры:

* Путь к источнику конфигурации
* Путь к файловой информационной базе

Результат:

* Файловая информационная база с загруженной исходной конфигурацией

```txt

Для указания инструмента конвертации необходимо установить переменную среды %V8_CONVERT_TOOL%.
По умолчанию используется пакетный режим конфигуратора.

```

```txt

ВНИМАНИЕ! При использовании ibcmd могут возникать ошибки загрузки конфигурации из XML-файлов, если в пути к файлам присутствует `..`, т.е. рекомендуется указывать полные пути.

Проверялось на версии 8.3.20.2290

```

### [conf2cf.cmd](./scripts/conf2cf.cmd)

Выполняет конвертацию конфигурации из указанного источника в бинарный CF-файл.

Источником может выступать:

* Файловая информационная база
* Каталог выгрузки конфигурации в файлы (xml)
* Каталог проекта 1C:Enterprise Development Tools (EDT)

Параметры:

* Путь к источнику конфигурации
* Путь к файлу конфигурации (cf)

Результат:

* Файл выгрузки исходной конфигурации (cf)

```txt

Для указания инструмента конвертации необходимо установить переменную среды %V8_CONVERT_TOOL%.
По умолчанию используется пакетный режим конфигуратора.

```

```txt

ВНИМАНИЕ! При использовании ibcmd могут возникать ошибки загрузки конфигурации из XML-файлов, если в пути к файлам присутствует `..`, т.е. рекомендуется указывать полные пути.

Проверялось на версии 8.3.20.2290

```

### [conf2xml.cmd](./scripts/conf2xml.cmd)

Выполняет выгрузку конфигурации из указанного источника в формат выгрузки конфигуратора (XML).

Источником может выступать:

* Путь к файлу конфигурации (cf)
* Файловая информационная база
* Каталог проекта 1C:Enterprise Development Tools (EDT)

Параметры:

* Путь к источнику конфигурации
* Путь к каталогу выгрузки файлов конфигурации

Результат:

* Каталог, содержащий XML-файлы выгрузки исходной конфигурации

```txt

Для указания инструмента конвертации необходимо установить переменную среды %V8_CONVERT_TOOL%.
По умолчанию используется пакетный режим конфигуратора.

```

### [conf2edt.cmd](./scripts/conf2edt.cmd)

Выполняет выгрузку конфигурации из указанного источника в проект 1C:Enterprise Development Tools (EDT).

Источником может выступать:

* Путь к файлу конфигурации (cf)
* Файловая информационная база
* Каталог выгрузки конфигурации в файлы (xml)

Параметры:

* Путь к источнику конфигурации
* Путь к каталогу проекта EDT

Результат:

* Каталог, содержащий проект 1C:Enterprise Development Tools (EDT) исходной конфигурации

```txt

Для указания инструмента конвертации необходимо установить переменную среды %V8_CONVERT_TOOL%.
По умолчанию используется пакетный режим конфигуратора.

```

### [dp2epf.cmd](./scripts/dp2epf.cmd)

Выполняет конвертацию внешних отчетов и обработок в бинарный формат (epf/erf).

Источником может выступать:

* Путь к основному файлу внешнего отчета или обработки в формате выгрузки конфигуратора (XML)
* Каталог внешних отчетов и обработок формате выгрузки конфигуратора (XML)
* Каталог проекта 1C:Enterprise Development Tools (EDT)

Параметры:

* Путь к источнику внешних отчетов и обработок
* Путь к каталогу для сохранения бинарных файлов внешних отчетов и обработок
* Путь к информационной базе или конфигурации в любом из форматов (CF, XML, EDT)

Результат:

* Каталог, содержащий бинарные файлы исходных внешних отчетов (epf) и обработок (erf)

Для использования базовой конфигурации в различных форматах может потребовать наличия скрипта [conf2ib.cmd](./scripts/conf2ib.cmd)

### [dp2xml.cmd](./scripts/dp2xml.cmd)

Выполняет конвертацию файлов внешних отчетов и обработок в формат выгрузки конфигуратора (XML).

Источником может выступать:

* Файл внешнего отчета или обработки (epf, erf)
* Каталог, содержащий бинарные файлы внешних отчетов и обработок (epf, erf)
* Каталог проекта 1C:Enterprise Development Tools (EDT)

Параметры:

* Путь к источнику внешних отчетов и обработок
* Путь к каталогу для сохранения в формате выгрузки конфигуратора (XML)
* Путь к информационной базе или конфигурации в любом из форматов (CF, XML, EDT)

Результат:

* Каталог, содержащий XML-файлы выгрузки исходных внешних отчетов (epf) и обработок (erf)

Для использования базовой конфигурации в различных форматах может потребовать наличия скрипта [conf2ib.cmd](./scripts/conf2ib.cmd)

### [dp2edt.cmd](./scripts/dp2edt.cmd)

Выполняет конвертацию файлов внешних отчетов и обработок в проект 1C:Enterprise Development Tools (EDT).

Источником может выступать:

* Файл внешнего отчета или обработки (epf, erf)
* Каталог, содержащий бинарные файлы внешних отчетов и обработок (epf, erf)
* Каталог внешних отчетов и обработок формате выгрузки конфигуратора (XML)

Параметры:

* Путь к источнику внешних отчетов и обработок
* Путь к каталогу проекта 1C:Enterprise Development Tools (EDT)
* Путь к информационной базе или конфигурации в любом из форматов (CF, XML, EDT)

Результат:

* Каталог, содержащий проект 1C:Enterprise Development Tools (EDT) исходных внешних отчетов и обработок

Для использования базовой конфигурации в различных форматах может потребовать наличия скрипта [conf2ib.cmd](./scripts/conf2ib.cmd)

### [ext2cfe.cmd](./scripts/ext2cfe.cmd)

Выполняет конвертацию расширения конфигурации из указанного источника в бинарный CFE-файл.

Источником может выступать:

* Каталог выгрузки расширения конфигурации в файлы (xml)
* Каталог проекта 1C:Enterprise Development Tools (EDT)

Параметры:

* Путь к источнику расширения конфигурации
* Путь к бинарному файлу расширения конфигурации (cfe)
* Путь к информационной базе или конфигурации в любом из форматов (CF, XML, EDT)

Результат:

* Файл выгрузки исходного расширения конфигурации (cfe)

```txt

Для указания инструмента конвертации необходимо установить переменную среды %V8_CONVERT_TOOL%.
По умолчанию используется пакетный режим конфигуратора.

```

Для использования базовой конфигурации в различных форматах может потребовать наличия скрипта [conf2ib.cmd](./scripts/conf2ib.cmd)

### [ext2xml.cmd](./scripts/ext2xml.cmd)

Выполняет конвертацию расширения конфигурации в формат выгрузки конфигуратора (XML).

Источником может выступать:

* Файл выгрузки расширения конфигурации (cfe)
* Каталог проекта 1C:Enterprise Development Tools (EDT)

Параметры:

* Путь к источнику расширения конфигурации
* Путь к каталогу для сохранения в формате выгрузки конфигуратора (XML)
* Путь к информационной базе или конфигурации в любом из форматов (CF, XML, EDT)

Результат:

* Каталог, содержащий XML-файлы выгрузки исходного расширения конфигурации

```txt

Для указания инструмента конвертации необходимо установить переменную среды %V8_CONVERT_TOOL%.
По умолчанию используется пакетный режим конфигуратора.

```

Для использования базовой конфигурации в различных форматах может потребовать наличия скрипта [conf2ib.cmd](./scripts/conf2ib.cmd)

### [ext2edt.cmd](./scripts/ext2edt.cmd)

Выполняет конвертацию расширения конфигурации в проект 1C:Enterprise Development Tools (EDT).

Источником может выступать:

* Файл выгрузки расширения конфигурации (cfe)
* Каталог выгрузки расширения конфигурации в файлы (xml)

Параметры:

* Путь к источнику расширения конфигурации
* Путь к каталогу проекта 1C:Enterprise Development Tools (EDT)
* Путь к информационной базе или конфигурации в любом из форматов (CF, XML, EDT)

Результат:

* Каталог, содержащий проект 1C:Enterprise Development Tools (EDT) исходного расширения конфигурации

```txt

Для указания инструмента конвертации необходимо установить переменную среды %V8_CONVERT_TOOL%.
По умолчанию используется пакетный режим конфигуратора.

```

Для использования базовой конфигурации в различных форматах может потребовать наличия скрипта [conf2ib.cmd](./scripts/conf2ib.cmd)

### [edt-validate.cmd](./scripts/edt-validate.cmd)

Выполняет проверку проекта 1C:Enterprise Development Tools (EDT) (`ring edt validate`).
Может использоваться для проектов конфигураций, расширений, внешних отчетов и отбработок.

Проверяем проектом может выступать:

* Путь к файловой информационной базе 1С
* Файл конфигурации (cf)
* Файл расширения конфигурации (cfe)
* Каталог выгрузки конфигурации или расширения в файлы (xml)
* Каталог файлов внешних отчетов и обработок (epf, erf)
* Каталог внешних отчетов и обработок формате выгрузки конфигуратора (XML)
* Каталог проекта 1C:Enterprise Development Tools (EDT)

Параметры:

* Проверяемый проект
* Путь к файлу отчета о проверке
* Путь к информационной базе или конфигурации в любом из форматов (CF, XML, EDT)

Результат:

* Отчет о проверке конфигурации средствами 1C:Enterprise Development Tools (EDT)

Для работы с конфигурациями в различных форматах может потребовать наличия скрипта [conf2edt.cmd](./scripts/conf2edt.cmd)
